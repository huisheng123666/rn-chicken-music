import React, {Component} from 'react';import { Text, Image, StyleSheet, View, TouchableWithoutFeedback } from 'react-native'import { flyGet } from '../../common/js/fetch'import { RankWrapper, RankItem, SongList, SongItem } from './style'import {utilWidth} from "../../common/js/util";export default class Rank extends Component {  constructor (props) {    super(props)    this.state = {      rankList: []    }  }  async componentDidMount () {    const res = await flyGet('https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg')    let response = res.data.replace('MusicJsonCallback(', '')    response = JSON.parse(response.slice(0, response.length - 1))    this.setState({      rankList: response.data.topList    })  }  render() {    const { rankList } = this.state    const { navigation } = this.props    return (      <RankWrapper>        <View style={{flexDirection: 'column', alignItems: 'center', paddingBottom: utilWidth(40)}}>          {rankList.map(item => {            return (              <TouchableWithoutFeedback key={item.id} onPress={() => {navigation.navigate('SongList', {type: 'top', id: item.id})}}>              <RankItem>                <Image style={styles.itemImg} source={{uri: item.picUrl}} />                <SongList>                  {item.songList.map((item1, index1) => <SongItem key={index1 + Math.random()}>{index1 + 1} {item1.songname}-{item1.singername }</SongItem>)}                </SongList>              </RankItem>            </TouchableWithoutFeedback>)          })}        </View>      </RankWrapper>    );  }}const styles = StyleSheet.create({  itemImg: {    width: utilWidth(200),    height: utilWidth(200),    marginRight: utilWidth(40)  }})